# –§—É–Ω–∫—Ü–∏–∏ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏

## ‚ú® –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

### 1. üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ (–∫–∞–∂–¥—ã–µ 5 —Å–µ–∫—É–Ω–¥)
- –ß–∞—Ç—ã –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –±–µ–∑ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- –°–æ–æ–±—â–µ–Ω–∏—è –≤ –æ—Ç–∫—Ä—ã—Ç–æ–º —á–∞—Ç–µ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç "—Ç–∏—Ö–æ" (–±–µ–∑ –ø–æ–∫–∞–∑–∞ –∑–∞–≥—Ä—É–∑–∫–∏)

### 2. üîî –ó–≤—É–∫–æ–≤—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- –ü—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è –∑–≤—É–∫–æ–≤–æ–π —Å–∏–≥–Ω–∞–ª
- –ó–≤—É–∫ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è –≤—Ö–æ–¥—è—â–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π (–Ω–µ —Å–≤–æ–∏—Ö)
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Web Audio API –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∑–≤—É–∫–∞

### 3. üì¨ –î–µ—Å–∫—Ç–æ–ø–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- –ë—Ä–∞—É–∑–µ—Ä–Ω—ã–µ push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –Ω–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –∏–º—è –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è –∏ —Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è
- –¢—Ä–µ–±—É–µ—Ç —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)

### 4. üí¨ –í–∏–∑—É–∞–ª—å–Ω–æ–µ –≤—ã–¥–µ–ª–µ–Ω–∏–µ –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã—Ö
- **–ù–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã–µ —á–∞—Ç—ã:**
  - –°–≤–µ—Ç–ª–æ-—Å–µ—Ä—ã–π —Ñ–æ–Ω
  - –ñ–∏—Ä–Ω—ã–π —à—Ä–∏—Ñ—Ç –∏–º–µ–Ω–∏
  - –ñ–∏—Ä–Ω—ã–π —à—Ä–∏—Ñ—Ç –ø—Ä–µ–≤—å—é —Å–æ–æ–±—â–µ–Ω–∏—è
  - –ó–µ–ª–µ–Ω—ã–π –±–µ–π–¥–∂ —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã—Ö (–µ—Å–ª–∏ –µ—Å—Ç—å)

- **–ë–µ–π–¥–∂ –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã—Ö:**
  - –ó–µ–ª–µ–Ω—ã–π –∫—Ä—É–∂–æ–∫ —Å —á–∏—Å–ª–æ–º –≤ –ø—Ä–∞–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º —É–≥–ª—É –∞–≤–∞—Ç–∞—Ä–∫–∏
  - –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–æ—á–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–ø–∞–¥–∞–µ—Ç –ø–æ—Å–ª–µ –ø—Ä–æ—á—Ç–µ–Ω–∏—è

### 5. üì± –ê–≤—Ç–æ–ø—Ä–æ–∫—Ä—É—Ç–∫–∞
- –ï—Å–ª–∏ –≤—ã –Ω–∞—Ö–æ–¥–∏—Ç–µ—Å—å –≤–Ω–∏–∑—É —á–∞—Ç–∞, –Ω–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–∫—Ä—É—á–∏–≤–∞—é—Ç—Å—è
- –ï—Å–ª–∏ –≤—ã —á–∏—Ç–∞–µ—Ç–µ —Å—Ç–∞—Ä—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è, –ø—Ä–æ–∫—Ä—É—Ç–∫–∞ –Ω–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç

---

## üéØ –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
```javascript
// –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–∂–¥—ã–µ 5 —Å–µ–∫—É–Ω–¥
setInterval(() => {
    loadChats(true);  // –¢–∏—Ö–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
    if (currentChatId) {
        loadMessages(currentChatId, true);
    }
}, 5000);
```

### –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
- –°—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç—Å—è –≤—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è (created timestamp)
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ (–Ω–µ –Ω–∞—à–∏ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è)
- –í–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è –∑–≤—É–∫ –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ

### –°—á–µ—Ç—á–∏–∫ –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã—Ö
- **Telegram:** –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `unread_count` –∏–∑ API
- **Avito:** –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –ø–æ –ø–æ–ª—é `isRead` –≤ –ø–æ—Å–ª–µ–¥–Ω–µ–º —Å–æ–æ–±—â–µ–Ω–∏–∏

---

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏

### –ò–∑–º–µ–Ω–∏—Ç—å –∏–Ω—Ç–µ—Ä–≤–∞–ª –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
–í —Ñ–∞–π–ª–µ `static/js/app.js` –Ω–∞–π–¥–∏—Ç–µ:
```javascript
}, 5000); // 5 —Å–µ–∫—É–Ω–¥
```

–ò–∑–º–µ–Ω–∏—Ç–µ –Ω–∞ –Ω—É–∂–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ (–≤ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥–∞—Ö):
- 3000 = 3 —Å–µ–∫—É–Ω–¥—ã (—á–∞—â–µ)
- 10000 = 10 —Å–µ–∫—É–Ω–¥ (—Ä–µ–∂–µ)

### –û—Ç–∫–ª—é—á–∏—Ç—å –∑–≤—É–∫–æ–≤—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
–ó–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ –≤ `loadChats()`:
```javascript
// if (hasNewMessages && notificationSound) {
//     notificationSound();
// }
```

### –û—Ç–∫–ª—é—á–∏—Ç—å –¥–µ—Å–∫—Ç–æ–ø–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
–ó–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ –≤ `loadChats()`:
```javascript
// if ('Notification' in window && Notification.permission === 'granted') {
//     new Notification(...);
// }
```

---

## üöÄ –ë—É–¥—É—â–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

### –í–æ–∑–º–æ–∂–Ω—ã–µ –¥–æ–ø–æ–ª–Ω–µ–Ω–∏—è:
1. **WebSocket –≤–º–µ—Å—Ç–æ polling** ‚Äî –º–≥–Ω–æ–≤–µ–Ω–Ω–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π
2. **–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∑–≤—É–∫–∞** ‚Äî –≤—ã–±–æ—Ä –º–µ–ª–æ–¥–∏–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
3. **–°—á–µ—Ç—á–∏–∫ –≤ title** ‚Äî "(3) Avito Messenger"
4. **–§–∞–≤–∏–∫–æ–Ω —Å –±–µ–π–¥–∂–µ–º** ‚Äî –∫—Ä–∞—Å–Ω–∞—è —Ç–æ—á–∫–∞ –Ω–∞ –∏–∫–æ–Ω–∫–µ –≤–∫–ª–∞–¥–∫–∏
5. **–í–∏–±—Ä–∞—Ü–∏—è –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö** ‚Äî –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ

---

## üìù –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

### –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:
- **Polling (5s)** ‚Äî –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏–π –æ–ø—Ä–æ—Å —Å–µ—Ä–≤–µ—Ä–∞
- **Web Audio API** ‚Äî –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∑–≤—É–∫–æ–≤—ã—Ö —Å–∏–≥–Ω–∞–ª–æ–≤
- **Notifications API** ‚Äî –¥–µ—Å–∫—Ç–æ–ø–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- **CSS animations** ‚Äî –ø–ª–∞–≤–Ω–æ–µ –ø–æ—è–≤–ª–µ–Ω–∏–µ –±–µ–π–¥–∂–µ–π

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:
- –ó–∞–ø—Ä–æ—Å—ã –∫—ç—à–∏—Ä—É—é—Ç—Å—è –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –±—Ä–∞—É–∑–µ—Ä–∞
- –¢–∏—Ö–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –Ω–µ –±–ª–æ–∫–∏—Ä—É—é—Ç UI
- –ó–≤—É–∫ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –≤ –ø–∞–º—è—Ç–∏ (–±–µ–∑ —Ñ–∞–π–ª–æ–≤)

---

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

1. –û—Ç–∫—Ä–æ–π—Ç–µ https://avito.tamgdemaslocrm.ru/messages
2. –†–∞–∑—Ä–µ—à–∏—Ç–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (–µ—Å–ª–∏ –ø–æ—è–≤–∏—Ç—Å—è –∑–∞–ø—Ä–æ—Å)
3. –ü–æ–ø—Ä–æ—Å–∏—Ç–µ –∫–æ–≥–æ-—Ç–æ –Ω–∞–ø–∏—Å–∞—Ç—å –≤–∞–º –≤ Avito –∏–ª–∏ Telegram
4. –í —Ç–µ—á–µ–Ω–∏–µ 5 —Å–µ–∫—É–Ω–¥ –≤—ã —É–≤–∏–¥–∏—Ç–µ:
   - üîî –ó–≤—É–∫–æ–≤–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
   - üì¨ –î–µ—Å–∫—Ç–æ–ø–Ω–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
   - üí¨ –ó–µ–ª–µ–Ω—ã–π –±–µ–π–¥–∂ –Ω–∞ —á–∞—Ç–µ
   - ‚ö° –ß–∞—Ç –≤—ã–¥–µ–ª–∏—Ç—Å—è –∂–∏—Ä–Ω—ã–º —à—Ä–∏—Ñ—Ç–æ–º

